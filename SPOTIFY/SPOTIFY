#!name = Spotify
#!compiled by NgDanhThanhTrung
[General]
bypass-system = true
dns-server = 94.140.14.14, 94.140.15.15
fallback-dns-server = 76.76.2.0, 76.76.10.0
ipv6 = false
prefer-ipv6 = false
skip-proxy = 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, localhost, *.local, captive.apple.com
tun-excluded-routes = 10.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 169.254.0.0/16, 172.16.0.0/12, 192.0.0.0/24, 192.0.2.0/24, 192.88.99.0/24, 192.168.0.0/16, 198.51.100.0/24, 203.0.113.0/24, 224.0.0.0/4, 255.255.255.255/32, 239.255.255.250/32

[Rule]
RULE-SET,https://raw.githubusercontent.com/NgDanhThanhTrung/modules/main/OPTION/surge-exceptions-rule.conf,DIRECT
RULE-SET,https://raw.githubusercontent.com/NgDanhThanhTrung/modules/main/OPTION/surge-rule.conf,REJECT
FINAL,DIRECT

https://ahrefs.com/writing-tools/paragraph-rewriter
^https?:\/\/(spclient\.wg\.spotify\.com|.*-spclient\.spotify\.com)\/user-customization-service\/v1\/customize header-del if-none-match

[Script]
spotify-json = type=http-request,pattern=^https?:\/\/(spclient\.wg\.spotify\.com|.*-spclient\.spotify\.com)\/(artistview\/v1\/artist|album-entity-view\/v2\/album)\/,script-path=https://raw.githubusercontent.com/NgDanhThanhTrung/modules/main/SPOTIFY/spotify-json.js
spotify-proto = type=http-response,pattern=^https?:\/\/(spclient\.wg\.spotify\.com|.*-spclient\.spotify\.com)\/(bootstrap\/v1\/bootstrap|user-customization-service\/v1\/customize)$,requires-body=1,binary-body-mode=1,script-path=https://raw.githubusercontent.com/NgDanhThanhTrung/modules/main/SPOTIFY/spotify-proto.js

[MITM]
enable = true
hostname = spclient.wg.spotify.com, *-spclient.spotify.com
